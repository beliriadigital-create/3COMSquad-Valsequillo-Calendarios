<!doctype html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>3COM Squad Valsequillo ‚Äî Calendarios</title>
    <style>
        :root { --bg: #2b0f18; --accent: #7b1c3a; --text: #222; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: var(--bg); color: white; margin: 0; padding: 20px; }
        .wrap { max-width: 600px; margin: 0 auto; }
        .logo { text-align: center; margin-bottom: 30px; }
        .logo img { max-width: 180px; }
        
        .cat-title { background: var(--accent); padding: 15px; border-radius: 10px 10px 0 0; font-weight: bold; text-transform: uppercase; font-size: 14px; letter-spacing: 1px; }
        .cat-container { background: rgba(255,255,255,0.05); padding: 15px; border-radius: 0 0 10px 10px; margin-bottom: 30px; }
        
        /* TARJETA REDISE√ëADA */
        .card { background: white; color: var(--text); border-radius: 12px; margin-bottom: 20px; overflow: hidden; box-shadow: 0 10px 25px rgba(0,0,0,0.3); display: block; }
        
        /* BLOQUE 1: FECHA (ARRIBA) */
        .card-header { background: #f8f8f8; padding: 10px 15px; font-size: 13px; color: #666; border-bottom: 1px solid #eee; font-weight: bold; }
        
        /* BLOQUE 2: EQUIPOS Y RESULTADO (CENTRO) */
        .card-body { padding: 25px 15px; text-align: center; }
        .team-name { font-size: 18px; font-weight: 800; color: #000; display: block; line-height: 1.2; }
        .vs-divider { color: #999; font-size: 14px; margin: 8px 0; display: block; font-weight: normal; text-transform: lowercase; }
        .score { background: var(--accent); color: white; padding: 6px 20px; border-radius: 8px; font-size: 24px; font-weight: 900; display: inline-block; margin-top: 15px; }
        
        /* BLOQUE 3: PABELL√ìN (ABAJO DEL TODO - FORZADO) */
        .card-footer { background: #fff; padding: 15px; border-top: 2px solid #f0f0f0; }
        .location { color: #8b6a7a; font-size: 13px; font-weight: 600; display: block; margin-bottom: 5px; }
        .status { color: var(--accent); font-size: 11px; font-weight: 800; text-transform: uppercase; text-align: right; display: block; }
        
        .no-data { text-align: center; padding: 30px; opacity: 0.4; font-style: italic; }
    </style>
</head>
<body>
    <div class="wrap">
        <div class="logo"><img src="logo.png"></div>
        <div id="app"></div>
    </div>

    <script>
        const cats = [
            { n: "Liga Territorial Femenina", s: "TF" },
            { n: "Juvenil Femenino", s: "JUVF" },
            { n: "Cadete Femenino", s: "CADF" },
            { n: "Infantil Femenino", s: "INFF" }
        ];
        const app = document.getElementById('app');
        const v = new Date().getTime();

        cats.forEach(c => {
            app.insertAdjacentHTML('beforeend', `
                <div class="cat-title">${c.n}</div>
                <div class="cat-container" id="list-${c.s}"><div class="no-data">Cargando...</div></div>
            `);

            fetch(`${c.s}/partidos.json?v=${v}`)
                .then(r => r.json())
                .then(data => {
                    const container = document.getElementById(`list-${c.s}`);
                    container.innerHTML = '';
                    if (!data.matches || data.matches.length === 0) {
                        container.innerHTML = '<div class="no-data">No hay partidos pr√≥ximos.</div>';
                        return;
                    }
                    data.matches.forEach(m => {
                        // Limpiamos el "VS" si el scraper lo trajo repetido
                        const local = m.local.replace(/^vs\s+/i, '');
                        const visitante = m.visitante.replace(/^vs\s+/i, '');
                        
                        container.insertAdjacentHTML('beforeend', `
                            <div class="card">
                                <div class="card-header">üìÖ ${m.fecha_texto}</div>
                                <div class="card-body">
                                    <span class="team-name">${local}</span>
                                    <span class="vs-divider">vs</span>
                                    <span class="team-name">${visitante}</span>
                                    ${m.resultado && m.resultado !== '-' ? `<div class="score">${m.resultado}</div>` : ''}
                                </div>
                                <div class="card-footer">
                                    <span class="location">üìç ${m.lugar || 'Pabell√≥n por confirmar'}</span>
                                    <span class="status">${m.resultado && m.resultado !== '-' ? 'FINALIZADO' : 'PR√ìXIMO'}</span>
                                </div>
                            </div>
                        `);
                    });
                }).catch(() => {
                    document.getElementById(`list-${c.s}`).innerHTML = '<div class="no-data">Sin datos disponibles.</div>';
                });
        });
    </script>
</body>
</html>
