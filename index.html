<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3COM Squad Valsequillo - Calendarios</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #b01c68; --dark: #4a1033; }
        body { 
            font-family: 'Inter', sans-serif; margin: 0; padding: 20px; color: white;
            background: #4a1033 url('fondo.png') no-repeat center center fixed; 
            background-size: cover; min-height: 100vh;
        }
        body::before { content: ""; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.6); z-index: -1; }
        .header { text-align: center; margin-bottom: 20px; }
        .logo { max-width: 100px; margin-bottom: 10px; }
        h1 { font-weight: 900; text-transform: uppercase; font-size: 1.4rem; margin: 0; }

        /* Estilo del Partido Destacado */
        .destacado-container { max-width: 800px; margin: 0 auto 30px auto; }
        .destacado-card { 
            background: white; color: #1a1a1a; border-radius: 20px; padding: 20px;
            border-left: 10px solid var(--primary); box-shadow: 0 15px 35px rgba(0,0,0,0.4);
            text-align: center;
        }
        .destacado-tag { background: var(--primary); color: white; padding: 5px 15px; border-radius: 50px; font-size: 0.7rem; font-weight: 900; text-transform: uppercase; }

        /* Estilo de la cuadr√≠cula horizontal */
        .grid-categorias { 
            display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); 
            gap: 15px; max-width: 900px; margin: 0 auto; 
        }
        .card-cat { 
            background: rgba(255, 255, 255, 0.9); color: #1a1a1a; border-radius: 15px; 
            padding: 15px; text-decoration: none; text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2); border-bottom: 4px solid var(--primary);
            transition: 0.2s;
        }
        .card-cat:hover { transform: translateY(-5px); background: white; }
        .cat-name { font-weight: 800; font-size: 0.9rem; color: var(--dark); display: block; }
        
        .fecha-d { color: var(--primary); font-weight: 800; font-size: 0.9rem; margin: 10px 0; display: block; }
        .equipos-d { font-size: 1.1rem; font-weight: 900; margin: 10px 0; line-height: 1.2; }
    </style>
</head>
<body>
    <div class="header">
        <img src="logo.png" class="logo" alt="Logo">
        <h1>3COM Squad Valsequillo</h1>
    </div>

    <div class="destacado-container" id="destacado-area">
        <!-- Aqu√≠ saldr√° el pr√≥ximo partido de cualquier categor√≠a -->
    </div>

    <h2 style="text-align:center; font-size: 1rem; text-transform: uppercase; opacity: 0.8;">Todas las Categor√≠as</h2>
    <div id="menu-categorias" class="grid-categorias">
        <!-- Botones horizontales -->
    </div>

    <script>
        async function iniciar() {
            const menu = document.getElementById('menu-categorias');
            const destacadoArea = document.getElementById('destacado-area');
            
            try {
                const res = await fetch('categories.json?v=' + Date.now());
                const categorias = await res.json();
                let todosLosPartidos = [];

                for (const cat of categorias) {
                    // 1. Crear bot√≥n en el men√∫ horizontal
                    const a = document.createElement('a');
                    a.href = './' + cat.slug + '/';
                    a.className = 'card-cat';
                    a.innerHTML = `<span class="cat-name">${cat.name}</span>`;
                    menu.appendChild(a);

                    // 2. Intentar buscar el pr√≥ximo partido para el destacado
                    try {
                        const resP = await fetch(`./${cat.slug}/partidos.json?v=` + Date.now());
                        const dataP = await resP.json();
                        if (dataP.matches && dataP.matches.length > 0) {
                            // Cogemos el primero que no tenga resultado (el pr√≥ximo)
                            const proximo = dataP.matches.find(m => !m.local.includes('-') && !m.resultado?.includes('-')) || dataP.matches[0];
                            todosLosPartidos.push({ ...proximo, catName: cat.name });
                        }
                    } catch (e) { console.log("No hay datos para " + cat.slug); }
                }

                // 3. Mostrar el partido m√°s relevante arriba
                if (todosLosPartidos.length > 0) {
                    const p = todosLosPartidos[0]; // Por ahora el primero encontrado
                    destacadoArea.innerHTML = `
                        <div class="destacado-card">
                            <span class="destacado-tag">Pr√≥ximo Partido: ${p.catName}</span>
                            <span class="fecha-d">üóìÔ∏è ${p.visitante.includes('/') ? p.visitante : p.fecha_texto}</span>
                            <div class="equipos-d">
                                ${p.local.includes('-') ? p.fecha_texto.replace('VS','') : p.local} 
                                <br>vs<br> 
                                ${p.visitante.includes('/') ? p.local : p.visitante}
                            </div>
                            <div style="font-size:0.8rem; color:#666;">üìç ${p.resultado.includes('PABELLON') ? p.resultado : p.lugar}</div>
                        </div>
                    `;
                }
            } catch (e) { console.error(e); }
        }
        iniciar();
    </script>
</body>
</html>
